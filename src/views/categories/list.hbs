<h1>Category List</h1>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Image</th>
      <th>Subcategories</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {{#each categories}}
      <tr>
        <td>{{this.name}}</td>
        <td>{{this.description}}</td>
        <td>    
          {{#if this.image}}
            <img src="{{this.image}}" alt="{{this.name}}" style="max-width: 150px;"><br>
          {{/if}}
        </td>
        <td>
          <table>
          <tr>
            {{#each this.subcategories}}
              <td>{{this.name}}</td>
            {{/each}}
          </tr>
          </table>  
        </td>
        <td>
          <a href="/categories/{{this.slug}}/edit" class="btn btn-edit">Edit</a>
        </td>
      </tr>
    {{/each}}
  </tbody>
</table>


{{#each categories}}
  <div class="category">
    <form action="/categories/{{this.slug}}/edit" method="POST">
      <h2>Category: <input type="text" name="name" value="{{this.name}}" required></h2>
      <button type="submit">Save</button>
    </form>
    <ul>
      {{#each this.subcategories}}
        <li>
          <form action="/categories/{{../this.slug}}/sub/{{this.slug}}/edit" method="POST">
            Subcategory: <input type="text" name="name" value="{{this.name}}" required>
            <button type="submit">Save</button>
          </form>
        </li>
      {{/each}}
    </ul>
  </div>
{{/each}}

<style>
  .category {
    padding: 15px;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    border-radius: 8px;
    background-color: #f9f9f9;
  }

  h2 {
    display: inline-block;
    margin-right: 10px;
  }

  form {
    display: inline-block;
  }

  button {
    padding: 5px 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    margin-left: 10px;
  }
</style>
